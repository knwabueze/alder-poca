path /notes/{uid} is Note[] {
  read() { isUserOrAdmin(uid) }
  write() { isUserOrAdmin(uid) }
  index() { ["title"] }
}

isUserOrAdmin(uid) { return isCurrentUser(uid) || isAdmin() }
isAdmin() { return root.child('admins').child(auth.uid).val() != null }
isCurrentUser(uid) { return isSignedIn() && auth.uid == uid }
isSignedIn() { return auth != null }

type Note {
  title: String,
  description: String

  validate() { return this.title.length <= 2000 }  
}